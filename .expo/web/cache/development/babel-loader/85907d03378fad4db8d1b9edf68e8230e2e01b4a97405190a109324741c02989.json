{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport { OWNER_EMAIL } from \"../config\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport axios from 'axios';\nimport * as Animatable from 'react-native-animatable';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function CheckoutScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var _route$params = route.params,\n    truck = _route$params.truck,\n    pickup = _route$params.pickup,\n    delivery = _route$params.delivery,\n    distanceKm = _route$params.distanceKm,\n    helpers = _route$params.helpers,\n    total = _route$params.total;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    customerName = _useState2[0],\n    setCustomerName = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    phone = _useState4[0],\n    setPhone = _useState4[1];\n  var _useState5 = useState('FNB Bank Transfer'),\n    _useState6 = _slicedToArray(_useState5, 2),\n    paymentMethod = _useState6[0],\n    setPaymentMethod = _useState6[1];\n  function sendOrder() {\n    var subject = encodeURIComponent('New delivery booking');\n    var body = encodeURIComponent(\"Name: \" + customerName + \"\\nPhone: \" + phone + \"\\nTruck: \" + truck.name + \"\\nPickup: \" + pickup + \"\\nDelivery: \" + delivery + \"\\nDistance: \" + distanceKm + \" km\\nHelpers: \" + helpers + \"\\nTotal: ZAR \" + total.toFixed(2) + \"\\nPayment method: \" + paymentMethod);\n    var serverUrl = 'http://localhost:3333/api/bookings';\n    axios.post(serverUrl, {\n      name: customerName,\n      phone: phone,\n      truck: truck.name,\n      pickup: pickup,\n      delivery: delivery,\n      distance: distanceKm,\n      helpers: helpers,\n      total: total\n    }).then(function () {\n      navigation.navigate('Confirmation', {\n        truck: truck,\n        distanceKm: distanceKm,\n        amount: total\n      });\n    }).catch(function () {\n      var mailto = \"mailto:\" + OWNER_EMAIL + \"?subject=\" + subject + \"&body=\" + body;\n      Linking.openURL(mailto).then(function () {\n        return navigation.navigate('Confirmation', {\n          truck: truck,\n          distanceKm: distanceKm,\n          amount: total\n        });\n      }).catch(function (e) {\n        console.warn('Could not open email client', e);\n        navigation.navigate('Confirmation', {\n          truck: truck,\n          distanceKm: distanceKm,\n          amount: total\n        });\n      });\n    });\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"Checkout\"\n    }), _jsxs(Text, {\n      children: [\"Truck: \", truck.name]\n    }), _jsxs(Text, {\n      children: [\"Distance: \", distanceKm, \" km\"]\n    }), _jsxs(Text, {\n      children: [\"Helpers: \", helpers]\n    }), _jsxs(Text, {\n      style: styles.total,\n      children: [\"Total: ZAR \", total.toFixed(2)]\n    }), _jsx(TextInput, {\n      style: styles.input,\n      placeholder: \"Your full name\",\n      value: customerName,\n      onChangeText: setCustomerName\n    }), _jsx(TextInput, {\n      style: styles.input,\n      placeholder: \"Phone number\",\n      value: phone,\n      onChangeText: setPhone,\n      keyboardType: \"phone-pad\"\n    }), _jsx(Text, {\n      style: {\n        marginTop: 8\n      },\n      children: \"Payment method\"\n    }), _jsx(Text, {\n      children: paymentMethod\n    }), _jsx(Animatable.View, {\n      animation: \"pulse\",\n      iterationCount: 1,\n      duration: 800,\n      style: {\n        marginTop: 12\n      },\n      children: _jsx(Button, {\n        title: \"Send booking to company (email)\",\n        onPress: sendOrder\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 16,\n    backgroundColor: '#fff'\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: '700',\n    marginBottom: 12\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#ccc',\n    padding: 8,\n    marginVertical: 8\n  },\n  total: {\n    fontSize: 18,\n    fontWeight: '700',\n    marginVertical: 12\n  }\n});","map":{"version":3,"names":["React","useState","View","Text","Button","StyleSheet","TextInput","Linking","OWNER_EMAIL","Platform","axios","Animatable","jsx","_jsx","jsxs","_jsxs","CheckoutScreen","_ref","route","navigation","_route$params","params","truck","pickup","delivery","distanceKm","helpers","total","_useState","_useState2","_slicedToArray","customerName","setCustomerName","_useState3","_useState4","phone","setPhone","_useState5","_useState6","paymentMethod","setPaymentMethod","sendOrder","subject","encodeURIComponent","body","name","toFixed","serverUrl","post","distance","then","navigate","amount","catch","mailto","openURL","e","console","warn","style","styles","container","children","title","input","placeholder","value","onChangeText","keyboardType","marginTop","animation","iterationCount","duration","onPress","create","flex","padding","backgroundColor","fontSize","fontWeight","marginBottom","borderWidth","borderColor","marginVertical"],"sources":["/home/trevor/uz_dining_app/truck_delivery_app/screens/CheckoutScreen.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { View, Text, Button, StyleSheet, TextInput, Linking } from 'react-native';\nimport { OWNER_EMAIL } from '../config';\nimport { Platform } from 'react-native';\nimport axios from 'axios';\nimport * as Animatable from 'react-native-animatable';\n\nexport default function CheckoutScreen({ route, navigation }) {\n  const { truck, pickup, delivery, distanceKm, helpers, total } = route.params;\n  const [customerName, setCustomerName] = useState('');\n  const [phone, setPhone] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('FNB Bank Transfer');\n\n  function sendOrder() {\n    const subject = encodeURIComponent('New delivery booking');\n    const body = encodeURIComponent(\n      `Name: ${customerName}\\nPhone: ${phone}\\nTruck: ${truck.name}\\nPickup: ${pickup}\\nDelivery: ${delivery}\\nDistance: ${distanceKm} km\\nHelpers: ${helpers}\\nTotal: ZAR ${total.toFixed(2)}\\nPayment method: ${paymentMethod}`\n    );\n    // Try server POST first (axios)\n    const serverUrl = 'http://localhost:3333/api/bookings';\n    axios.post(serverUrl, { name: customerName, phone, truck: truck.name, pickup, delivery, distance: distanceKm, helpers, total })\n      .then(() => {\n        navigation.navigate('Confirmation', { truck, distanceKm, amount: total });\n      })\n      .catch(() => {\n        // fallback to mailto\n        const mailto = `mailto:${OWNER_EMAIL}?subject=${subject}&body=${body}`;\n        Linking.openURL(mailto)\n          .then(() => navigation.navigate('Confirmation', { truck, distanceKm, amount: total }))\n          .catch((e) => {\n            console.warn('Could not open email client', e);\n            navigation.navigate('Confirmation', { truck, distanceKm, amount: total });\n          });\n      });\n  }\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Checkout</Text>\n      <Text>Truck: {truck.name}</Text>\n      <Text>Distance: {distanceKm} km</Text>\n      <Text>Helpers: {helpers}</Text>\n      <Text style={styles.total}>Total: ZAR {total.toFixed(2)}</Text>\n\n      <TextInput style={styles.input} placeholder=\"Your full name\" value={customerName} onChangeText={setCustomerName} />\n      <TextInput style={styles.input} placeholder=\"Phone number\" value={phone} onChangeText={setPhone} keyboardType=\"phone-pad\" />\n\n      <Text style={{ marginTop: 8 }}>Payment method</Text>\n      <Text>{paymentMethod}</Text>\n\n      <Animatable.View animation=\"pulse\" iterationCount={1} duration={800} style={{ marginTop: 12 }}>\n        <Button title=\"Send booking to company (email)\" onPress={sendOrder} />\n      </Animatable.View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, padding: 16, backgroundColor: '#fff' },\n  title: { fontSize: 20, fontWeight: '700', marginBottom: 12 },\n  input: { borderWidth: 1, borderColor: '#ccc', padding: 8, marginVertical: 8 },\n  total: { fontSize: 18, fontWeight: '700', marginVertical: 12 }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}